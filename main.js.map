{"version":3,"sources":["./src/$_lazy_route_resource lazy namespace object","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/example-custom-html-parser.service.ts","./src/app/example-custom-parser.service.ts","./src/app/example-mention-dropdown/example-mention-dropdown.component.ts","./src/app/example-mention-dropdown/example-mention-dropdown.component.html","./src/app/fate-bootstrap/fate-bootstrap.component.ts","./src/app/fate-bootstrap/fate-bootstrap.component.html","./src/app/fate-controller.service.ts","./src/app/fate-fontawsome-legacy-icon.service.ts","./src/app/fate-html-parser.service.ts","./src/app/fate-icon.service.ts","./src/app/fate-input/fate-input.component.ts","./src/app/fate-legacy-browser.service.ts","./src/app/fate-link-dropdown/fate-link-dropdown.component.ts","./src/app/fate-link-dropdown/fate-link-dropdown.component.html","./src/app/fate-material-icon.service.ts","./src/app/fate-material/fate-material.component.ts","./src/app/fate-material/fate-material.component.html","./src/app/fate-node.ts","./src/app/fate-parser.service.ts","./src/app/fate-type.enum.ts","./src/app/fate-ui/fate-ui.component.ts","./src/app/fate-ui/fate-ui.component.html","./src/app/fate.module.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import { Component } from '@angular/core';\n\nimport { FateControllerService } from './fate.module';\nimport { ExampleMentionDropdownComponent } from './example-mention-dropdown/example-mention-dropdown.component';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  title = 'app';\n  aboutFate = `<a class=\"repos custom-block\" tabindex=\"0\" contenteditable=\"false\" href=\"https://github.com/onaluf/fate\" title=\"Flexible Angular Text Editor\"><i class=\"fab fa-github\"></i> Fate</a> is a <strong>rich</strong> <em>text</em> <u>editor</u> (wysiwyg) natively written for angular (>= v2) in typescript with footprint and\n  flexibility in mind. Its goal is to be very easy to customise and be as small as\n  it can thanks to tree shaking.`;\n\n  constructor(fateControllerService: FateControllerService) {\n    fateControllerService.registerInlineAction(\n      'mention',\n      {\n        command: 'insertHTML',\n        display: 'contextual',\n        name: 'Mention',\n        regexp: /(@\\w*)$/,\n        matched: '',\n        dropdown: ExampleMentionDropdownComponent\n      }\n    )\n  }\n}\n","<div class=\"demo\">\n  <div class=\"demo-type\">Simple UI</div>\n  <form class=\"demo-editor\">\n    <div class=\"form-group\">\n      <fate-ui uiId=\"foo\"></fate-ui>\n      <fate-input uiId=\"foo\" [(ngModel)]=\"aboutFate\" placeholder=\"Rich Textarea\" name=\"simple\"></fate-input>\n    </div>\n  </form>\n</div>\n<div class=\"demo\">\n  <div class=\"demo-type\">Bootstrap4 UI</div>\n  <form class=\"demo-editor\">\n    <div class=\"form-group\">\n      <fate-bootstrap [(ngModel)]=\"aboutFate\" name=\"bootstrap\" placeholder=\"Rich Textarea\"></fate-bootstrap>\n    </div>\n  </form>\n</div>\n<div class=\"demo material\">\n  <div class=\"demo-type\">Material UI</div>\n  <form class=\"demo-editor\">\n    <div class=\"form-group\">\n      <mat-form-field>\n        <fate-material [(ngModel)]=\"aboutFate\" placeholder=\"Rich Textarea\" name=\"material\"></fate-material>\n      </mat-form-field>\n    </div>\n  </form>\n</div>\n\n<!--\n  <strong>debug</strong>\n  <textarea type=\"text\" [(ngModel)]=\"aboutFate\"  name=\"htmlSrc\"></textarea>\n-->\n","import { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\n\n// Customization example\nimport { ExampleMentionDropdownComponent } from './example-mention-dropdown/example-mention-dropdown.component';\nimport { ExampleCustomHtmlParserService } from './example-custom-html-parser.service';\nimport { ExampleCustomParserService } from './example-custom-parser.service';\n\nimport { AppComponent } from './app.component';\n\nimport { FateModule, FateMaterialModule, FateHtmlParserService, FateParserService } from './fate.module';\n\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    ExampleMentionDropdownComponent\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    FateModule,\n    FateMaterialModule,\n    MatFormFieldModule,\n    MatInputModule,\n    BrowserAnimationsModule,\n  ],\n  bootstrap: [AppComponent],\n  providers: [\n    {provide: FateHtmlParserService, useClass: ExampleCustomHtmlParserService},\n    {provide: FateParserService, useClass: ExampleCustomParserService},\n  ]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\n\nimport { FateNode, FateType, FateHtmlParserService } from './fate.module';\n\n@Injectable()\nexport class ExampleCustomHtmlParserService extends FateHtmlParserService {\n\n  constructor() {\n    super();\n  }\n\n  public parseType(element: HTMLElement): Array<FateNode> {\n    if (element.nodeName === 'SPAN' && element.classList.contains('repos')) {\n      return [new FateNode(('mention' as FateType), {\n        url: element.getAttribute('data-href'),\n        description: element.getAttribute('title'),\n        name: element.textContent\n      })];\n    } else {\n      return super.parseType(element);\n    }\n  }\n\n  protected serializeType(node: FateNode) {\n    if ((node.type as string) === 'mention') {\n      return '<span class=\"repos custom-block\" tabindex=\"0\" contenteditable=\"false\" data-href=\"' + node.value.url + '\" title=\"' + node.value.description + '\"><i class=\"fab fa-github\"></i> ' + node.value.name + '</span>'\n    } else {\n      return super.serializeType(node);\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { FateNode, FateType, FateParserService } from './fate.module';\n\n@Injectable()\nexport class ExampleCustomParserService extends FateParserService {\n\n  constructor() {\n    super();\n  }\n\n  public parseType(element: HTMLElement): Array<FateNode> {\n    if (element.nodeName === 'A' && element.classList.contains('repos')) {\n      return [new FateNode(('mention' as FateType), {\n        url: element.getAttribute('href'),\n        description: element.getAttribute('title'),\n        name: element.textContent\n      })];\n    } else {\n      return super.parseType(element);\n    }\n  }\n\n  protected serializeType(node: FateNode) {\n    if ((node.type as string) === 'mention') {\n      return '<a class=\"repos custom-block\" tabindex=\"0\" contenteditable=\"false\" data-href=\"' + node.value.url + '\" title=\"' + node.value.description + '\"><i class=\"fab fa-github\"></i> ' + node.value.name + '</a>'\n    } else {\n      return super.serializeType(node);\n    }\n  }\n}\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\n\nimport { FateDropdown } from '../fate.module';\n\n@Component({\n  selector: 'example-fate-mention-dropdown',\n  templateUrl: './example-mention-dropdown.component.html',\n  styleUrls: ['./example-mention-dropdown.component.scss']\n})\nexport class ExampleMentionDropdownComponent implements FateDropdown {\n\n  private _value: string;\n  @Input()\n  public set value(value) {\n    this._value = value;\n    this.filterList();\n  }\n  public get value() {\n    return this._value;\n  }\n\n  @Output()\n  public valueChange = new EventEmitter<string>();\n\n  private reposList = [\n    {\n      name: 'Fate',\n      description: 'Flexible Angular Text Editor',\n      url: 'https://github.com/onaluf/fate'\n    }, {\n      name: 'ngLipsum',\n      description: 'Simple Lorem Ipsum based dummy content generator directive and services for Angular',\n      url: 'https://github.com/onaluf/ngLipsum'\n    }, {\n      name: 'RacerJS',\n      description: 'A simple racing game inspired by the classic Lotus series on Amiga. This has been made for the 10k Apart contest (http://10k.aneventapart.com).',\n      url: 'https://github.com/onaluf/RacerJS'\n    }, {\n      name: 'voxel',\n      description: 'a voxel spacing demo done in javascript',\n      url: 'https://github.com/onaluf/voxel'\n    }, {\n      name: 'gameQuery',\n      description: 'a javascript game engine with jQuery',\n      url: 'https://github.com/onaluf/gameQuery'\n    }, {\n      name: 'jQueryGameDevEssentials',\n      description: 'This is the source code for the example of the book \"jQuery Game Development Essentials\" (http://jquerygamedevelopment.com/)',\n      url: 'https://github.com/onaluf/jQueryGameDevEssentials'\n    }\n  ];\n  public selected = 0;\n\n  public filteredList: Array<any>;\n  private filterList() {\n    this.filteredList = [];\n    const criteria = this._value.substr(1);\n    for (const repos of this.reposList) {\n      if (repos.name.toLowerCase().indexOf(criteria.toLowerCase()) > -1) {\n        this.filteredList.push(repos);\n      }\n    }\n    if (this.selected >= this.filteredList.length) {\n      this.selected = Math.max(0, this.filteredList.length - 1);\n    }\n  }\n\n  public changeValue (value) {\n    this._value = value;\n    this.valueChange.emit('<span class=\"repos custom-block\" tabindex=\"0\" contenteditable=\"false\" data-href=\"' + value.url + '\" title=\"' + value.description + '\"><i class=\"fab fa-github\"></i> ' + value.name + '</span>&nbsp;');\n  }\n\n  public selectNext () {\n    this.selected++;\n    if (this.selected >= this.filteredList.length) {\n      this.selected = this.filteredList.length - 1;\n    }\n  };\n  public selectPrevious () {\n    this.selected--;\n    if (this.selected < 0) {\n      this.selected = 0;\n    }\n  };\n  public confirmSelection () {\n    this.changeValue(this.filteredList[this.selected]);\n  };\n}\n","<ul>\n  <li *ngFor=\"let repos of filteredList; let i = index\" [class.active]=\"i === selected\" class=\"repos\" (click)=\"changeValue(repos)\">{{repos.name}}</li>\n</ul>\n","import { Component, Input, ElementRef, HostListener, ComponentFactoryResolver } from '@angular/core';\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\n\nimport { defaultButtons } from '../fate-ui/fate-ui.component';\nimport { FateControllerService } from '../fate-controller.service';\nimport { FateParserService } from '../fate-parser.service';\nimport { FateIconService } from '../fate-icon.service';\n\nlet instanceCounter = 0;\n\n@Component({\n  selector: 'fate-bootstrap',\n  templateUrl: './fate-bootstrap.component.html',\n  styleUrls: ['./fate-bootstrap.component.scss'],\n  providers: [\n    {provide: NG_VALUE_ACCESSOR, useExisting: FateBootstrapComponent, multi: true}\n  ],\n})\nexport class FateBootstrapComponent implements ControlValueAccessor {\n\n  @Input()\n  row: number;\n\n  @Input()\n  placeholder: string;\n\n  @Input()\n  public buttons: Array<string> = defaultButtons;\n\n  // implentation of ControlValueAccessor:\n  protected changed = new Array<(value: string) => void>();\n  protected clickOngoing: boolean = false;\n\n  public passthrough: string;\n  public uiId;\n  public uiVisible;\n\n\n  @HostListener('focusout', ['$event'])\n  public blur (event: any){\n    if (!this.clickOngoing){\n      this.uiVisible = false;\n    }\n  }\n\n  @HostListener('mousedown', ['$event'])\n  public mousedown (event: any){\n    this.clickOngoing = true;\n  }\n\n  @HostListener('mouseup', ['$event'])\n  public mouseup (event: any){\n    this.clickOngoing = false;\n  }\n\n  @HostListener('focusin', ['$event'])\n  public focus (event: any){\n    this.uiVisible = true;\n    console.info('boostrap focus!')\n  }\n\n  constructor(el: ElementRef, controller: FateControllerService, parser: FateParserService, icon: FateIconService, factoryResolver: ComponentFactoryResolver) {\n    this.uiId = 'bootstrap-' + (instanceCounter++);\n  }\n\n  public writeValue(value: string) {\n    this.passthrough = value;\n  }\n\n  public registerOnChange(fn: (value: string) => void) {\n    this.changed.push(fn);\n  }\n\n  public registerOnTouched(fn: () => void) {}\n\n  // change callback\n  public onChange(value) {\n    this.passthrough = value;\n    this.changed.forEach(f => f(value));\n  }\n}\n","<fate-input customClass=\"form-control\" [uiId]=\"uiId\" [row]=\"row\" [placeholder]=\"placeholder\" [ngModel]=\"passthrough\" (ngModelChange)=\"onChange($event)\"></fate-input>\n<fate-ui [uiId]=\"uiId\" [buttons]=\"buttons\" [ngClass]=\"{'visible': uiVisible}\" class=\"tooltip tooltip-inner\"></fate-ui>\n","import { Injectable } from '@angular/core';\n\nimport { Subject } from 'rxjs';\n\nimport { FateType } from './fate-type.enum';\nimport { FateLinkDropdownComponent } from './fate-link-dropdown/fate-link-dropdown.component';\n\nexport interface FateCommand {\n  name: string;\n  value: any;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FateControllerService {\n\n  // List of available commands, alphabetically\n  // see https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand\n  protected actionMapping = {\n    'bold' : {\n      command: 'bold',\n      name: 'Bold',\n      detect: FateType.BOLD\n    },\n    'italic' : {\n      command: 'italic',\n      name: 'Italic',\n      detect: FateType.ITALIC\n    },\n    'underline' : {\n      command: 'underline',\n      name: 'Underlined',\n      detect: FateType.UNDERLINE\n    },\n    'strike' : {\n      command: 'strikeThrough',\n      name: 'Strike Through',\n      detect: FateType.STRIKETHROUGH\n    },\n    'subscript' : {\n      command: 'subscript',\n      name: 'Subscript',\n      label: 'sub',\n      detect: FateType.SUBSCRIPT\n    },\n    'superscript' : {\n      command: 'superscript',\n      name: 'Superscript',\n      label: 'sup',\n      detect: FateType.SUPERSCRIPT\n    },\n    'heading1' : {\n      command: 'formatBlock',\n      value: 'H1',\n      name: '1st Header',\n      label: 'h1',\n      detect: FateType.HEADER1\n    },\n    'heading2' : {\n      command: 'formatBlock',\n      value: 'H2',\n      name: '2nd Header',\n      label: 'h2',\n      detect: FateType.HEADER2\n    },\n    'heading3' : {\n      command: 'formatBlock',\n      value: 'H3',\n      name: '3rd Header',\n      label: 'h3',\n      detect: FateType.HEADER3\n    },\n    'heading4' : {\n      command: 'formatBlock',\n      value: 'H4',\n      name: '4th Header',\n      label: 'h4',\n      detect: FateType.HEADER4\n    },\n    'heading5' : {\n      command: 'formatBlock',\n      value: 'H5',\n      name: '5th Header',\n      label: 'h5',\n      detect: FateType.HEADER5\n    },\n    'heading6' : {\n      command: 'formatBlock',\n      value: 'H6',\n      name: '6th Header',\n      label: 'h6',\n      detect: FateType.HEADER6\n    },\n    'normal' : {\n      command: 'formatBlock',\n      value: 'DIV',\n      name: 'Normal',\n      label: 'p',\n    },\n    'indent' : {\n      command: 'indent',\n      name: 'Indent',\n    },\n    'outdent' : {\n      command: 'outdent',\n      name: 'Outdent',\n    },\n    'ordered' : {\n      command: 'insertOrderedList',\n      name: 'Ordered List',\n      detect: FateType.ORDERED_LIST\n    },\n    'unordered' : {\n      command: 'insertUnorderedList',\n      name: 'Unorder List',\n      detect: FateType.UNORDERED_LIST\n    },\n    'center' : {\n      command: 'justifyCenter',\n      name: 'Center',\n      detect: FateType.ALIGN_CENTER\n    },\n    'justify' : {\n      command: 'justifyFull',\n      name: 'Justify',\n      detect: FateType.JUSTIFY\n    },\n    'left' : {\n      command: 'justifyLeft',\n      name: 'Left',\n      detect: FateType.ALIGN_LEFT\n    },\n    'right' : {\n      command: 'justifyRight',\n      name: 'Right',\n      detect: FateType.ALIGN_RIGHT\n    },\n    'undo' : {\n      command: 'undo',\n      name: 'Undo',\n    },\n    'redo' : {\n      command: 'redo',\n      name: 'Redo',\n    },\n    'clean' : {\n      command: 'removeFormat',\n      name: 'Remove Formating',\n    },\n    'link' : {\n      command: 'createLink',\n      undo: 'unlink',\n      name: 'Link',\n      detect: FateType.LINK,\n      dropdown: FateLinkDropdownComponent\n    }\n  };\n  public registerAction(name: string, action: any) {\n    if (this.actionMapping[name]) {\n      throw new Error('An action with the name \"' + name + '\" already exists!');\n    } else {\n      this.actionMapping[name] = action;\n    }\n  }\n  public getAction(actionName): boolean | any {\n    return this.actionMapping[actionName] || false;\n  }\n\n  protected inlineActionMapping: any = {};\n  public registerInlineAction(name: string, action: any) {\n    if (this.inlineActionMapping[name]) {\n      throw new Error('An inline action with the name \"' + name + '\" already exists!');\n    } else {\n      this.inlineActionMapping[name] = action;\n    }\n  }\n   public getInlineAction(context: string): boolean | any {\n    for (const action of Object.keys(this.inlineActionMapping)) {\n      const match = this.inlineActionMapping[action].regexp.exec(context);\n      if (match) {\n        this.inlineActionMapping[action].matched = match[1];\n        return this.inlineActionMapping[action];\n      }\n    }\n    return false;\n  }\n\n  protected commandsPipe = {\n    default: new Subject<FateCommand>()\n  };\n\n  protected enabledActions = {\n    default: new Subject<any>()\n  };\n\n  constructor() { }\n\n  public channel(channelId) {\n    if (!this.commandsPipe[channelId]) {\n      this.commandsPipe[channelId] = new Subject<FateCommand>();\n    }\n    return this.commandsPipe[channelId];\n  }\n\n  public enabled(channelId) {\n    if (!this.enabledActions[channelId]) {\n      this.enabledActions[channelId] = new Subject<any>();\n    }\n    return this.enabledActions[channelId];\n  }\n\n  public enableActions(channelId, nodes) {\n    const actions: Array<any> = [];\n    for (const node of nodes) {\n      for (const action in this.actionMapping) {\n        if (this.actionMapping[action].detect && this.actionMapping[action].detect === node.type) {\n          actions.push({action: action, value: node.value});\n        } else if (this.actionMapping[action].detect && typeof this.actionMapping[action].detect === 'function') {\n          const detected = this.actionMapping[action].detect(node);\n          if (detected) {\n            actions.push({action: action, value: detected.value});\n          }\n        }\n      }\n    }\n    this.enabledActions[channelId].next(actions);\n  }\n\n\n  public do(channel, action, value?) {\n    if (this.actionMapping[action].dropdown && !value) {\n      if (this.actionMapping[action].undo) {\n        this.commandsPipe[channel].next({name: this.actionMapping[action].undo, value: this.actionMapping[action].value || value});\n      } else {\n        throw new Error('Action \"' + action + '\"doesn\\'t have a undo command');\n      }\n    } else {\n      if (this.actionMapping[action].value && (typeof this.actionMapping[action].value === 'function')) {\n        this.commandsPipe[channel].next({name: this.actionMapping[action].command, value: this.actionMapping[action].value(value)});\n      } else {\n        this.commandsPipe[channel].next({name: this.actionMapping[action].command, value: this.actionMapping[action].value || value});\n      }\n    }\n  }\n\n  public doInline(channel, action, value?) {\n    if (action.dropdown && !value) {\n      if (action.undo) {\n        this.commandsPipe[channel].next({name: action.undo, value: action.value || value});\n      } else {\n        throw new Error('Action \"' + action + '\"doesn\\'t have a undo command');\n      }\n    } else {\n      if (action.value && (typeof action.value === 'function')) {\n        this.commandsPipe[channel].next({name: action.command, value: action.value(value)});\n      } else {\n        this.commandsPipe[channel].next({name: action.command, value: action.value || value});\n      }\n    }\n  }\n\n  public undo(channel, action, value?) {\n    const mapping = this.actionMapping[action].undo;\n    // TODO\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { FateIconService } from './fate-icon.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FateFontawsomeLegacyIconService extends FateIconService {\n\n  protected iconMapping = {\n    'bold' : '<i class=\"fa fa-bold\"></i>',\n    'italic' : '<i class=\"fa fa-italic\"></i>',\n    'underline' : '<i class=\"fa fa-underline\"></i>',\n    'strike' : '<i class=\"fa fa-strikethrough\"></i>',\n    'subscript' :  '<i class=\"fa fa-subscript\"></i>',\n    'superscript' : '<i class=\"fa fa-superscript\"></i>',\n    'indent' : '<i class=\"fa fa-indent\"></i>',\n    'outdent' : '<i class=\"fa fa-outdent\"></i>',\n    'ordered' : '<i class=\"fa fa-list-ol\"></i>',\n    'unordered' : '<i class=\"fa fa-list-ul\"></i>',\n    'center' : '<i class=\"fa fa-align-center\"></i>',\n    'justify' : '<i class=\"fa fa-align-justify\"></i>',\n    'left' : '<i class=\"fa fa-align-left\"></i>',\n    'right' : '<i class=\"fa fa-align-right\"></i>',\n    'undo' : '<i class=\"fa fa-undo\"></i>',\n    'redo' : '<i class=\"fa fa-repeat\"></i>',\n    'clean' : '<i class=\"fa fa-eraser\"></i>',\n    'link' : '<i class=\"fa fa-link\"></i>',\n  };\n}\n","import { Injectable } from '@angular/core';\nimport { FateNode } from './fate-node';\nimport { FateType } from './fate-type.enum';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FateHtmlParserService {\n\n  public parse(html: string): FateNode {\n    const div = document.createElement('div');\n    div.innerHTML = html;\n    return this.parseElement(div);\n  };\n\n  public parseElement(element: HTMLElement): FateNode {\n    const nodes = this.parseType(element);\n    let currentNode = nodes[0];\n\n    let isABlock = (currentNode.type === FateType.PARAGRAPH);\n    for (let i = 1; i < nodes.length; i++) {\n      currentNode.children.push(nodes[i]);\n      currentNode = nodes[i];\n      if (currentNode.type === FateType.PARAGRAPH) {\n        isABlock = true;\n      }\n    }\n\n    let previousNodeWasText = false;\n    for (let i = 0; i < element.childNodes.length; i ++) {\n      const child = element.childNodes[i];\n      // pick ahead to look for <br>\n      if (\n          (i < element.childNodes.length - 1) &&\n          (this.isLinebreak(element.childNodes[i + 1])) &&\n          !(isABlock && i === element.childNodes.length - 2) // The last child is a BR in a block, this can be ignored\n        ) {\n\n        previousNodeWasText = false;\n        if (child instanceof Text) {\n          // wrap the text in a paragraph\n          const paragraph = new FateNode(FateType.PARAGRAPH);\n          paragraph.children.push(child.data);\n          currentNode.children.push(paragraph);\n        } else if (child instanceof HTMLElement) {\n          // insert an empty paragraph\n          currentNode.children.push(this.parseElement(child));\n          currentNode.children.push(new FateNode(FateType.PARAGRAPH));\n        } else {\n          // ignore\n        }\n      } else {\n        if (child instanceof Text) {\n          // If two \"pure\" text node follow one another we can safely merge then as one (for i > 0)\n          if (previousNodeWasText) {\n            currentNode.children[currentNode.children.length - 1] = currentNode.children[currentNode.children.length - 1] + child.data;\n          } else {\n            currentNode.children.push(child.data);\n          }\n          previousNodeWasText = true;\n        } else if (child instanceof HTMLElement) {\n          currentNode.children.push(this.parseElement(child));\n          previousNodeWasText = false;\n        } else {\n          // ignore\n        }\n      }\n    }\n    return nodes[0];\n  }\n\n  public findParentNodes(node: Node, until: Node): Array<FateNode> {\n    const nodes: Array<FateNode> = [];\n    let current: HTMLElement | Node = (node.nodeType === 1) ? (node as HTMLElement) : (node.parentElement || node.parentNode);\n    while (current !== until) {\n      if (current instanceof HTMLElement) {\n        nodes.push(...this.parseType(current));\n      }\n      current = current.parentElement || node.parentNode;\n    }\n    return nodes;\n  }\n\n  protected getAdditonalStyle(element: HTMLElement): Array<FateNode> {\n    const style = element.style;\n    const detectedStyleNode = [];\n    // Look for alignement\n    const align = element.getAttribute('align') || style.textAlign;\n    switch (align) {\n      case 'left':\n        detectedStyleNode.push(new FateNode(FateType.ALIGN_LEFT));\n        break;\n      case 'center':\n        detectedStyleNode.push(new FateNode(FateType.ALIGN_CENTER));\n        break;\n      case 'right':\n        detectedStyleNode.push(new FateNode(FateType.ALIGN_RIGHT));\n        break;\n      case 'justify':\n        detectedStyleNode.push(new FateNode(FateType.JUSTIFY));\n        break;\n    }\n    // Look for color\n    const color = element.getAttribute('color') || style.color;\n    if(color) {\n      detectedStyleNode.push(new FateNode(FateType.COLOR, color));\n    }\n    // Look for size\n    const size = element.getAttribute('size') || style.fontSize;\n    if (size) {\n      detectedStyleNode.push(new FateNode(FateType.SIZE, size));\n    }\n    // Look for family\n    const typeface = element.getAttribute('face') || style.fontFamily;\n    if (typeface) {\n      detectedStyleNode.push(new FateNode(FateType.TYPEFACE, typeface));\n    }\n\n    return detectedStyleNode;\n  }\n\n  protected parseType(element: HTMLElement): Array<FateNode> {\n    const additionaStyle = this.getAdditonalStyle(element);\n    switch (element.nodeName) {\n      case 'H1':\n        return [new FateNode(FateType.HEADER1), ...additionaStyle];\n      case 'H2':\n        return [new FateNode(FateType.HEADER2), ...additionaStyle];\n      case 'H3':\n        return [new FateNode(FateType.HEADER3), ...additionaStyle];\n      case 'H4':\n        return [new FateNode(FateType.HEADER4), ...additionaStyle];\n      case 'H5':\n        return [new FateNode(FateType.HEADER5), ...additionaStyle];\n      case 'H6':\n        return [new FateNode(FateType.HEADER6), ...additionaStyle];\n      case 'B':\n      case 'STRONG':\n        return [new FateNode(FateType.BOLD)];\n      case 'I':\n      case 'EM':\n        return [new FateNode(FateType.ITALIC)];\n      case 'U':\n        return [new FateNode(FateType.UNDERLINE)];\n      case 'STRIKE':\n        return [new FateNode(FateType.STRIKETHROUGH)];\n      case 'SUB':\n        return [new FateNode(FateType.SUBSCRIPT)];\n      case 'SUP':\n        return [new FateNode(FateType.SUPERSCRIPT)];\n      case 'A':\n        return [new FateNode(FateType.LINK, element.getAttribute('href'))];\n      case 'OL':\n        return [new FateNode(FateType.ORDERED_LIST)];\n      case 'UL':\n        return [new FateNode(FateType.UNORDERED_LIST)];\n      case 'LI':\n        return [new FateNode(FateType.LISTITEM)];\n      case 'DIV':\n      case 'P':\n        if (additionaStyle.length > 0) {\n          return [...additionaStyle];\n        }\n        return [new FateNode(FateType.PARAGRAPH)];\n      case 'BLOCKQUOTE':\n        // FIXME: this doesn't work on FF\n        if (element.style.marginLeft === '40px') {\n          return [new FateNode(FateType.INDENT)];\n        }\n        return [new FateNode(FateType.NONE)];\n      default:\n        if (additionaStyle.length > 0) {\n          return [...additionaStyle];\n        }\n        return [new FateNode(FateType.NONE)];\n    }\n  }\n\n  protected parseValue(element: HTMLElement): any {\n    switch (element.nodeName) {\n      case 'A':\n        return element.getAttribute('href');\n    }\n    return undefined;\n  }\n\n  protected serializeType(node: FateNode): string {\n    switch (node.type) {\n      case FateType.PARAGRAPH:\n        return '<div>' + this.serialize(node, true) + '</div>';\n      case FateType.HEADER1:\n        return '<h1>' + this.serialize(node, true) + '</h1>';\n      case FateType.HEADER2:\n        return '<h2>' + this.serialize(node, true) + '</h2>';\n      case FateType.HEADER3:\n        return '<h3>' + this.serialize(node, true) + '</h3>';\n      case FateType.HEADER4:\n        return '<h4>' + this.serialize(node, true) + '</h4>';\n      case FateType.HEADER5:\n        return '<h5>' + this.serialize(node, true) + '</h5>';\n      case FateType.HEADER6:\n        return '<h6>' + this.serialize(node, true) + '</h6>';\n      case FateType.QUOTE:\n        return '<quote>' + this.serialize(node) + '</quote>';\n      case FateType.CODE:\n        return '<code>' + this.serialize(node) + '</code>';\n      case FateType.BOLD:\n        return '<strong>' + this.serialize(node) + '</strong>';\n      case FateType.ITALIC:\n        return '<em>' + this.serialize(node) + '</em>';\n      case FateType.UNDERLINE:\n        return '<u>' + this.serialize(node) + '</u>';\n      case FateType.STRIKETHROUGH:\n        return '<strike>' + this.serialize(node) + '</strike>';\n      case FateType.SUBSCRIPT:\n        return '<sub>' + this.serialize(node) + '</sub>';\n      case FateType.SUPERSCRIPT:\n        return '<sup>' + this.serialize(node) + '</sup>';\n      case FateType.LINK:\n        return '<a href=\"' + node.value + '\">' + this.serialize(node) + '</a>';\n      case FateType.ORDERED_LIST:\n        return '<ol>' + this.serialize(node) + '</ol>';\n      case FateType.UNORDERED_LIST:\n        return '<ul>' + this.serialize(node) + '</ul>';\n      case FateType.LISTITEM:\n        return '<li>' + this.serialize(node) + '</li>';\n      case FateType.ALIGN_LEFT:\n        return '<div style=\"text-align: left;\">' + this.serialize(node, true) + '</div>';\n      case FateType.ALIGN_CENTER:\n        return '<div style=\"text-align: center;\">' + this.serialize(node, true) + '</div>';\n      case FateType.ALIGN_RIGHT:\n        return '<div style=\"text-align: right\">' + this.serialize(node, true) + '</div>';\n      case FateType.JUSTIFY:\n        return '<div style=\"text-align: justify;\">' + this.serialize(node, true) + '</div>';\n      case FateType.INDENT:\n        return '<blockquote style=\"margin-left: 40px\">' + this.serialize(node, true) + '</blockquote>';\n      case FateType.COLOR:\n        return '<font color=\"' + node.value + '\">' + this.serialize(node) + '</font>';\n      case FateType.SIZE:\n        return '<font size=\"' + node.value + '\">' + this.serialize(node) + '</font>';\n      case FateType.TYPEFACE:\n        return '<font face=\"' + node.value + '\">' + this.serialize(node) + '</font>';\n      case FateType.NONE:\n        return this.serialize(node);\n    }\n  };\n\n  protected isLinebreak(child: Node): boolean {\n    return (child instanceof HTMLElement && child.nodeName === 'BR');\n  }\n\n  private p = document.createElement('p');\n  protected encodeHtml(text: string) {\n    // From https://stackoverflow.com/a/29482788/829139\n    this.p.textContent = text;\n    return this.p.innerHTML;\n  }\n\n  // Saves a Tree in string representation\n  public serialize (node: FateNode, fallbackToBr: boolean = false): string {\n    let serialized = '';\n    node.children.forEach((child) => {\n      if (typeof child === 'string') {\n        serialized += this.encodeHtml(child);\n      } else {\n        serialized += this.serializeType(child);\n      }\n    });\n    if (fallbackToBr && !serialized) {\n      serialized = '<br>';\n    }\n    return serialized;\n  };\n}\n","import { Injectable } from '@angular/core';\n\nimport { FateIcon } from './fate-icon.interface';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FateIconService implements FateIcon {\n\n  protected iconMapping: any = {\n    'bold' : '<i class=\"fas fa-bold\"></i>',\n    'italic' : '<i class=\"fas fa-italic\"></i>',\n    'underline' : '<i class=\"fas fa-underline\"></i>',\n    'strike' : '<i class=\"fas fa-strikethrough\"></i>',\n    'subscript' :  '<i class=\"fas fa-subscript\"></i>',\n    'superscript' : '<i class=\"fas fa-superscript\"></i>',\n    'indent' : '<i class=\"fas fa-indent\"></i>',\n    'outdent' : '<i class=\"fas fa-outdent\"></i>',\n    'ordered' : '<i class=\"fas fa-list-ol\"></i>',\n    'unordered' : '<i class=\"fas fa-list-ul\"></i>',\n    'center' : '<i class=\"fas fa-align-center\"></i>',\n    'justify' : '<i class=\"fas fa-align-justify\"></i>',\n    'left' : '<i class=\"fas fa-align-left\"></i>',\n    'right' : '<i class=\"fas fa-align-right\"></i>',\n    'undo' : '<i class=\"fas fa-undo-alt\"></i>',\n    'redo' : '<i class=\"fas fa-redo-alt\"></i>',\n    'clean' : '<i class=\"fas fa-eraser\"></i>',\n    'link' : '<i class=\"fas fa-link\"></i>',\n  };\n\n  public getIcon(actionName): string {\n    return this.iconMapping[actionName];\n  }\n}\n","import { Component, Input, ViewChild, ElementRef, ViewRef, ViewContainerRef, ComponentFactoryResolver, OnInit, OnChanges, AfterViewInit, OnDestroy } from '@angular/core';\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\n\nimport { Subscription } from 'rxjs';\n\nimport { FateControllerService } from '../fate-controller.service';\nimport { FateHtmlParserService } from '../fate-html-parser.service';\nimport { FateParserService } from '../fate-parser.service';\nimport { FateLegacyBrowserService } from '../fate-legacy-browser.service';\n\n@Component({\n  selector: 'fate-input',\n  template: `\n    <div class=\"fate-inline-dropdown\"\n         [class.hidden]=\"!inlineAction\"\n         [class.contextual]=\"inlineAction?.display === 'contextual'\"\n         [style.top]=\"dropdownPostionTop\"\n         [style.left]=\"dropdownPostionLeft\">\n      <ng-template #dropdown></ng-template>\n    </div>\n    <div [class]=\"'fate-edit-target ' + customClass\"\n         [ngClass]=\"{empty: empty}\"\n         contenteditable=\"true\"\n         [title]=\"placeholder\"\n         [innerHtml]=\"content\"></div>\n  `,\n  styles: [`\n    :host div.fate-edit-target {\n      display: block;\n      padding: 10px;\n      border: 1px solid #DDD;\n      outline: 0;\n      resize: vertical;\n      overflow: auto;\n      background: #FFF;\n      color: #000;\n      overflow: visible;\n    }\n    :host div.fate-edit-target.empty:not(:focus):before {\n      content:attr(title);\n      color: #636c72;\n    }\n    .fate-inline-dropdown {\n      border: 1px solid #DDD;\n      border-bottom: 0;\n    }\n    .fate-inline-dropdown.hidden {\n      display: none !important;\n    }\n    .fate-inline-dropdown.contextual {\n      position: absolute;\n      background: #FFF;\n      box-shadow: 0 5px 30px -10px rgba(0,0,0,0.4);\n      border-bottom: 1px solid #CCC;\n    }\n    :host {\n      margin-bottom: 10px;\n      /*position: relative;*/\n    }\n  `],\n  providers: [\n    {provide: NG_VALUE_ACCESSOR, useExisting: FateInputComponent, multi: true}\n  ],\n})\nexport class FateInputComponent implements ControlValueAccessor, OnChanges, OnInit, AfterViewInit, OnDestroy {\n\n  @Input()\n  public uiId: string = 'default';\n\n  @Input()\n  public row: number;\n\n  @Input()\n  public customClass: string;\n\n  @Input()\n  public placeholder: string = '';\n\n  @ViewChild('dropdown', {\n    read: ViewContainerRef,\n    static: true,\n  })\n  viewContainerRef: ViewContainerRef\n  protected dropdownComponent: ViewRef;\n  protected dropdownInstance: any;\n  public dropdownPostionTop: string;\n  public dropdownPostionLeft: string;\n  public inlineAction: any;\n\n  public content: SafeHtml;\n  public empty: boolean = true;\n  protected editTarget: any;\n  protected isFocused: boolean = false;\n\n  constructor(protected el: ElementRef, protected controller: FateControllerService, protected htmlParser: FateHtmlParserService, protected parser: FateParserService, protected sanitizer: DomSanitizer, protected factoryResolver: ComponentFactoryResolver, protected legacyBrowser: FateLegacyBrowserService) {}\n\n  private reactToChanges() {\n    const tree = this.htmlParser.parseElement(this.editTarget);\n    const serializedTree = this.parser.serialize(tree);\n    this.changed.forEach(f => f(serializedTree));\n  }\n\n  public ngOnInit() {\n    this.subscribeToUi(this.uiId);\n  }\n\n  public ngAfterViewInit() {\n    this.editTarget = this.el.nativeElement.querySelector('.fate-edit-target');\n    if (this.row) {\n      this.computeHeight();\n    }\n\n    this.editTarget.addEventListener('click', (event: any)=> {\n      console.debug('click');\n      // On click we save the text Selection\n      this.saveSelection();\n      // We check if there is a dropdown matching this context\n      this.checkForDropdownContext();\n    });\n\n    this.editTarget.addEventListener('keyup', (event: any)=> {\n      console.debug('keypressed');\n      // On click we save the text Selection\n      this.saveSelection();\n      // We check if there is a dropdown matching this context\n      this.checkForDropdownContext();\n    });\n\n    this.editTarget.addEventListener('focus', (event: any)=> {\n      console.debug('(' + this.uiId + ') focus');\n      // On focus we restore it\n      this.restoreSelection();\n      this.isFocused = true;\n    });\n    this.editTarget.addEventListener('blur', (event: any)=> {\n      console.debug('(' + this.uiId + ') blur');\n      this.isFocused = false;\n      this.saveSelection();\n\n      if (this.dropdownComponent) {\n        setTimeout(() => {\n          this.inlineAction = null;\n          this.dropdownComponent.destroy();\n        }, 300);\n        // this.inlineAction = null;\n        // this.dropdownComponent.destroy();\n      }\n    });\n\n    this.editTarget.addEventListener('keydown', (event: any)=> {\n      console.debug('keydown', event);\n      const stopDefault = () => {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n      const stopDefaultAndForceUpdate = () => {\n        stopDefault();\n        this.checkEmpty();\n        this.reactToChanges();\n      }\n      // This is needed because, if the current selection is part\n      // of a non-editable child of the input, the default delete won't\n      // work.\n      // This case can happen if there is a cutom element that\n      // was inserted by some custom controller.\n      //\n      // Some constraints for a custom block to work on top of contenteditable=false:\n      // -moz-user-select: none;\n      // -webkit-user-modify: read-only;\n      //\n      // Note: It may make sense to delete the selection for normal text\n      // input too but for now we only do it on deletion.\n      if ((event.key === 'Backspace' || event.key === 'Delete') && this.selectionRange) {\n        const node = this.selectionRange.commonAncestorContainer;\n        console.debug('Deletion', node);\n        if (node instanceof HTMLElement && !(node as HTMLElement).isContentEditable) {\n          // this is the case on firefox\n          console.debug('deleting inside un-editable block detected');\n          this.selectionRange.selectNode(node);\n          this.selectionRange.deleteContents();\n          stopDefaultAndForceUpdate();\n        } else if (node.nodeName === '#text' && !this.legacyBrowser.findParentElement(node).isContentEditable) {\n          // this is the case on webkit\n          console.debug('deleting inside un-editable block detected');\n          this.selectionRange.selectNode(this.legacyBrowser.findParentElement(node));\n          this.selectionRange.deleteContents();\n          stopDefaultAndForceUpdate();\n        }\n      }\n      // This is needed because, there is a bug in Firefox that prevent\n      // deleting a uneditable element inside an editable element. So we\n      // reimplement the whole function for all browsers.\n      if (event.key === 'Backspace' && this.selectionRange) {\n        const node = this.selectionRange.commonAncestorContainer;\n        if (this.selectionRange.collapsed === true &&\n            this.selectionRange.startOffset === 0 &&\n            node.previousSibling instanceof HTMLElement &&\n            !(node.previousSibling as HTMLElement).isContentEditable ) {\n          node.previousSibling.remove();\n          stopDefaultAndForceUpdate();\n        }\n      } else if (event.key === 'Delete' && this.selectionRange) {\n        const node = this.selectionRange.commonAncestorContainer;\n        if (this.selectionRange.collapsed === true &&\n            this.selectionRange.endContainer.nodeName === '#text' &&\n            this.selectionRange.endOffset === (this.selectionRange.endContainer as Text).length &&\n            node.nextSibling instanceof HTMLElement &&\n            !(node.nextSibling as HTMLElement).isContentEditable ) {\n          node.nextSibling.remove();\n          stopDefaultAndForceUpdate();\n        }\n      }\n      // If a dropdown is currently being displayed we use the up/down\n      // key to navigate its content and return to select the selected\n      // element\n      if (this.inlineAction) {\n        if (event.key === 'Up' || event.key === 'ArrowUp') {\n          stopDefault();\n          this.dropdownInstance.selectPrevious();\n        } else if (event.key === 'Down' || event.key === 'ArrowDown') {\n          stopDefault();\n          this.dropdownInstance.selectNext();\n        } else if (event.key === 'Enter') {\n          stopDefault();\n          this.dropdownInstance.confirmSelection();\n        }\n      }\n\n      // IE11 doesn't support 'input' event\n      if ((window.document as any).documentMode) {\n        setTimeout(() => {\n          console.debug('input event fallback');\n          this.checkEmpty();\n          this.reactToChanges();\n        }, 0);\n      }\n    });\n\n    this.editTarget.addEventListener('input', (event: any)=> {\n      console.debug('input event');\n      this.checkEmpty();\n      this.reactToChanges();\n    });\n\n    const style: any = window.getComputedStyle(this.editTarget);\n    this.editTarget.style.minHeight = this.getHeight(2);\n  }\n\n  public ngOnChanges(changes) {\n    if (changes['uiId']) {\n      this.subscribeToUi(this.uiId);\n    }\n    if (changes['row']) {\n      if (this.editTarget) {\n        this.computeHeight();\n      }\n    }\n  }\n\n  public ngOnDestroy() {\n    if (this.uiSubscription) {\n      this.uiSubscription.unsubscribe();\n    }\n  }\n\n  protected computeHeight() {\n    this.editTarget.style.height = this.getHeight(this.row);\n  }\n\n  protected checkEmpty() {\n    if (this.editTarget.innerHTML === '') {\n      this.editTarget.innerHTML = '<br>';\n      this.empty = true;\n    } else if (this.editTarget.innerHTML === '<br>') {\n      this.empty = true;\n    } else {\n      this.empty = false;\n    }\n  }\n\n  protected getHeight(rowCount) {\n    const style: any = window.getComputedStyle(this.editTarget);\n    let height = this.editTarget.style.height = (parseInt(style.lineHeight, 10) * rowCount);\n    if (style.boxSizing === 'border-box') {\n      height += parseInt(style.paddingTop, 10) + parseInt(style.paddingBottom, 10) + parseInt(style.borderTopWidth, 10) + parseInt(style.borderBottomWidth, 10);\n    }\n    return height + 'px';\n  }\n\n  protected uiSubscription: Subscription;\n  protected subscribeToUi(uiId) {\n    console.debug('subscribing to ' + uiId, this.uiSubscription);\n    if (this.uiSubscription) {\n      this.uiSubscription.unsubscribe();\n    }\n    this.uiSubscription = this.controller.channel(uiId).subscribe((command) => {\n      // if input is not on focus we save current focus:\n      const focus = document.activeElement;\n      console.debug('(' + uiId + ') got command ' + command.name + '/' + command.value);\n\n      this.restoreSelection();\n      if (command.name === 'insertHTML' && this.selectionRange) {\n        // If something is selected we assume that the goal is to replace it,\n        // so first we delete the content\n        this.selectionRange.deleteContents();\n        // insertHtml seems quite broken so we do it ourseleves\n        this.selectionRange.insertNode(document.createRange().createContextualFragment(command.value));\n        // move cusor to the end of the newly inserted element\n        this.selectionRange.collapse(false);\n        // Force the update of the model\n        this.checkEmpty();\n        this.reactToChanges();\n      } else {\n        document.execCommand(command.name, false, command.value);\n      }\n      this.saveSelection();\n      (focus as any).focus();\n    });\n  }\n\n  // Saves the current text selection\n  protected selectionRange: Range;\n  protected saveSelection() {\n    if (this.selectionInEditableTarget()) {\n      const sel = window.getSelection();\n      if (sel.getRangeAt && sel.rangeCount) {\n        this.selectionRange = sel.getRangeAt(0);\n        console.debug('(' + this.uiId + ') saveSelection', this.selectionRange);\n        this.detectStyle();\n      }\n    }\n  }\n  // Restors the current text selection\n  protected restoreSelection() {\n    if (this.selectionInEditableTarget()) {\n      return;\n    }\n    console.debug('(' + this.uiId + ') restoreSelection', this.selectionRange);\n    if (this.selectionRange) {\n      const sel = window.getSelection();\n      sel.removeAllRanges();\n      sel.addRange(this.selectionRange);\n    }\n  }\n\n  protected selectionInEditableTarget() {\n    const sel = window.getSelection();\n    const node = sel.getRangeAt && sel.rangeCount && sel.getRangeAt(0) && sel.getRangeAt(0).commonAncestorContainer;\n    return node && (node === this.editTarget || this.legacyBrowser.findParent(node, '.fate-edit-target') === this.editTarget);\n  }\n\n  protected detectStyle() {\n    let node = this.selectionRange.commonAncestorContainer;\n    if (!node || (!(this.legacyBrowser.findParent(node, '.fate-edit-target') && node !== this.editTarget))){\n      // The current selection is not contained in the editable zone.\n      // this is most likely due to the input being empty.\n      return;\n    }\n    // special cases for FF when selection is obtained by double click:\n    if ((this.selectionRange.endOffset === 0) &&\n        (this.selectionRange.startContainer.nodeValue) &&\n        (this.selectionRange.startOffset === this.selectionRange.startContainer.nodeValue.length)) {\n      node = this.selectionRange.startContainer.nextSibling;\n    } else if ((this.selectionRange.endOffset === 0) &&\n        (this.selectionRange.startOffset === 0)) {\n      node = this.selectionRange.startContainer.parentElement;\n    } else if ((this.selectionRange.commonAncestorContainer === this.editTarget) &&\n               (this.selectionRange.startContainer === this.editTarget) &&\n               (this.selectionRange.endContainer === this.editTarget)) {\n      node = this.selectionRange.commonAncestorContainer.childNodes[this.selectionRange.startOffset];\n    }\n    if (node && node !== this.editTarget) {\n      const nodes = this.htmlParser.findParentNodes(node, this.editTarget);\n      console.debug('  -> detected actions: ', nodes);\n      this.controller.enableActions(this.uiId, nodes);\n    }\n  }\n\n  // implentation of ControlValueAccessor:\n  protected changed = new Array<(value: string) => void>();\n\n  public writeValue(value: string) {\n    if (value) {\n      this.content = this.sanitizer.bypassSecurityTrustHtml(this.htmlParser.serialize(this.parser.parse(value)));\n      this.empty = false;\n    } else {\n      this.content = this.sanitizer.bypassSecurityTrustHtml('<br>');\n      this.empty = true;\n    }\n    this.selectionRange = undefined;\n  }\n\n  public registerOnChange(fn: (value: string) => void) {\n    this.changed.push(fn);\n  }\n\n  public registerOnTouched(fn: () => void) {}\n\n  protected checkForDropdownContext() {\n    const startPos = Math.max(this.selectionRange.startOffset - 20, 0);\n    const length = this.selectionRange.startOffset - startPos;\n    const context = this.selectionRange.startContainer.textContent.substr(startPos, length);\n\n    const inlineAction = this.controller.getInlineAction(context);\n    if (inlineAction) {\n      if (!this.inlineAction || this.inlineAction.dropdown !== inlineAction.dropdown) {\n        this.inlineAction = inlineAction;\n        this.initDropdown(inlineAction, this.selectionRange.getBoundingClientRect());\n      } else {\n        this.inlineAction = inlineAction;\n        this.updateDropdown(inlineAction.matched);\n      }\n    } else if (this.dropdownComponent) {\n      this.inlineAction = null;\n      this.dropdownComponent.destroy();\n    }\n  }\n\n  protected initDropdown(actionComponent, position) {\n    // set the dropdown component\n    if (this.dropdownComponent) {\n      this.dropdownComponent.destroy();\n    }\n    const factory = this.factoryResolver.resolveComponentFactory(actionComponent.dropdown);\n    const component: any = factory.create(this.viewContainerRef.parentInjector);\n    if (component.instance.valueChange) {\n      component.instance.value = actionComponent.matched;\n      component.instance.valueChange.subscribe((value) => {\n        this.editTarget.focus();\n        const end = this.selectionRange.endOffset;\n        this.selectionRange.setStart(this.selectionRange.endContainer, end - actionComponent.matched.length);\n        this.controller.doInline(this.uiId, this.inlineAction, value);\n        // delete the dropdown\n        this.inlineAction = null;\n        this.dropdownComponent.destroy();\n      });\n      this.dropdownComponent = this.viewContainerRef.insert(component.hostView);\n      this.dropdownInstance = component.instance;\n      this.updateDropdownPosition();\n    } else {\n      throw new Error('The component used as a dropdown doesn\\'t contain a valueChange emmiter!');\n    }\n  }\n\n  protected updateDropdown(value) {\n    this.dropdownInstance.value = value;\n    this.updateDropdownPosition();\n  }\n\n  protected updateDropdownPosition() {\n    if (this.inlineAction.display === 'contextual') {\n      // create a selection to get the size of the matching text\n      const parentOffsetBB = this.el.nativeElement.offsetParent.getBoundingClientRect();\n      const range = this.selectionRange.cloneRange();\n      const end = range.endOffset;\n      range.setStart(range.endContainer, end - this.inlineAction.matched.length);\n      const boundingBox = range.getBoundingClientRect();\n      this.dropdownPostionTop = (boundingBox.top + boundingBox.height - parentOffsetBB.top) + 'px';\n      this.dropdownPostionLeft = (boundingBox.left - parentOffsetBB.left) + 'px';\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FateLegacyBrowserService {\n  \n  public findParentElement(node: Node): HTMLElement {\n    let el = node\n    while (!(el instanceof HTMLElement)) {\n      el = el.parentElement || el.parentNode;\n    }\n    return el;\n  }\n\n  public findParent(node: Node, parentSelector: string) {\n    if (Element.prototype.closest) {\n      return this.findParentElement(node).closest(parentSelector);\n    }\n    \n    let matchMethod;\n    if (Element.prototype.matches) {\n      matchMethod = 'matches';\n    } else if ((Element.prototype as any).msMatchesSelector) {\n      matchMethod = 'msMatchesSelector';\n    } else if ((Element.prototype as any).webkitMatchesSelector) {\n      matchMethod = 'webkitMatchesSelector';\n    } else {\n      throw Error('The browser is not supported (\"closest\" and \"mateches\" are missing)');\n    }\n\n    let el = node;\n\n    do {\n      try {\n        if (Element.prototype[matchMethod].call(el, parentSelector)) {\n          return el;\n        }\n      } catch (e) {\n        console.info('something happend', e);\n      }\n      \n      el = el.parentElement || el.parentNode;\n    } while (el !== null && el.nodeType === 1);\n    return null;\n  }\n}\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\n\nimport { FateDropdown } from '../fate-dropdown.interface';\n\n@Component({\n  selector: 'fate-link-dropdown',\n  templateUrl: './fate-link-dropdown.component.html',\n  styleUrls: ['./fate-link-dropdown.component.scss']\n})\nexport class FateLinkDropdownComponent implements FateDropdown {\n\n  @Input()\n  public value: string;\n\n  @Output()\n  public valueChange = new EventEmitter<string>();\n\n  public changeValue (value) {\n    this.value = value;\n    this.valueChange.emit(value);\n  }\n\n  public selectNext () {};\n  public selectPrevious () {};\n  public confirmSelection () {};\n}\n","<input type=\"text\" [ngModel]=\"value\" (ngModelChange)=\"changeValue($event)\" placeholder=\"http://\">\n","import { Injectable } from '@angular/core';\n\nimport { FateIconService } from './fate-icon.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FateMaterialIconService extends FateIconService {\n\n  protected iconMapping = {\n    'bold' : '<i class=\"material-icons\">format_bold</i>',\n    'italic' : '<i class=\"material-icons\">format_italic</i>',\n    'underline' : '<i class=\"material-icons\">format_underlined</i>',\n    'strike' : '<i class=\"material-icons\">format_strikethrough</i>',\n    'subscript' :  'x<sub>2</sub>',\n    'superscript' : 'x<sup>2</sup>',\n    'indent' : '<i class=\"material-icons\">format_indent_increase</i>',\n    'outdent' : '<i class=\"material-icons\">format_indent_decrease</i>',\n    'ordered' : '<i class=\"material-icons\">format_list_numbered</i>',\n    'unordered' : '<i class=\"material-icons\">format_list_bulleted</i>',\n    'center' : '<i class=\"material-icons\">format_align_center</i>',\n    'justify' : '<i class=\"material-icons\">format_align_justify</i>',\n    'left' : '<i class=\"material-icons\">format_align_left</i>',\n    'right' : '<i class=\"material-icons\">format_align_right</i>',\n    'undo' : '<i class=\"material-icons\">undo</i>',\n    'redo' : '<i class=\"material-icons\">redo</i>',\n    'clean' : '<i class=\"material-icons\">format_clear</i>',\n    'link' : '<i class=\"material-icons\">link</i>',\n  };\n}\n","import { Component, Input, HostBinding, HostListener, Optional, Self, ElementRef, OnDestroy } from '@angular/core';\nimport { ControlValueAccessor, NgControl } from '@angular/forms';\nimport { MatFormFieldControl } from '@angular/material/form-field';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\n\nimport { defaultButtons } from '../fate-ui/fate-ui.component';\nimport { FateControllerService } from '../fate-controller.service';\nimport { FateParserService } from '../fate-parser.service';\nimport { FateIconService } from '../fate-icon.service';\nimport { FateMaterialIconService } from '../fate-material-icon.service';\n\nimport { Subject } from 'rxjs';\n\nlet instanceCounter = 0;\n\n@Component({\n  selector: 'fate-material',\n  templateUrl: './fate-material.component.html',\n  styleUrls: ['./fate-material.component.scss'],\n  providers: [\n    { provide: MatFormFieldControl, useExisting: FateMaterialComponent },\n    { provide: FateIconService, useExisting: FateMaterialIconService }\n  ],\n})\nexport class FateMaterialComponent implements  ControlValueAccessor, OnDestroy, MatFormFieldControl<string>  {\n\n  @Input()\n  row: number;\n\n  @Input()\n  public buttons: Array<string> = defaultButtons;\n\n  @Input()\n  public get value(): string {\n    return this.passthrough;\n  }\n  public set value(value: string) {\n    this.stateChanges.next();\n    this.passthrough = value;\n    this.changed.forEach(f => f(value));\n  }\n  public passthrough: string;\n\n  @Input()\n  get placeholder() {\n    return this._placeholder;\n  }\n  set placeholder(placeholder) {\n    this._placeholder = placeholder;\n    this.stateChanges.next();\n  }\n  protected _placeholder: string;\n\n  public uiId;\n  @HostBinding()\n  id = `${this.uiId}`;\n\n  @HostListener('focusout')\n  public blur() {\n    this.focused = false;\n    this.stateChanges.next();\n    if (!this.clickOngoing){\n      this.uiVisible = false;\n    }\n  }\n\n  @HostListener('focusin')\n  public focus() {\n    this.focused = true;\n    this.uiVisible = true;\n    this.stateChanges.next();\n  }\n\n  @HostListener('mousedown', ['$event'])\n  public mousedown (event: any){\n    this.clickOngoing = true;\n  }\n\n  @HostListener('mouseup', ['$event'])\n  public mouseup (event: any){\n    this.clickOngoing = false;\n  }\n  public clickOngoing = false;\n  public uiVisible = false;\n\n  get empty() {\n    return !this.passthrough || this.passthrough === '';\n  }\n\n  get shouldLabelFloat() {\n    return this.focused || !this.empty;\n  }\n\n  @Input()\n  get required() {\n    return this._required;\n  }\n  set required(req) {\n    this._required = coerceBooleanProperty(req);\n    this.stateChanges.next();\n  }\n  protected _required = false;\n\n  @Input()\n  get disabled() {\n    return this._disabled;\n  }\n  set disabled(dis) {\n    this._disabled = coerceBooleanProperty(dis);\n    this.stateChanges.next();\n  }\n  protected _disabled = false;\n\n  public errorState = false;\n\n  public controlType = 'fate-material';\n\n  @HostBinding('attr.aria-describedby')\n  describedBy = '';\n\n  public setDescribedByIds(ids: string[]) {\n    this.describedBy = ids.join(' ');\n  }\n\n  public onContainerClick(event: MouseEvent) {}\n\n  public stateChanges = new Subject<void>();\n  public focused = false;\n\n  protected changed = new Array<(value: string) => void>();\n\n  constructor(controller: FateControllerService, parser: FateParserService, icon: FateIconService, el: ElementRef, @Optional() @Self() public ngControl: NgControl) {\n    this.uiId = 'material-' + (instanceCounter++);\n    // Setting the value accessor directly (instead of using\n    // the providers) to avoid running into a circular import.\n    if (this.ngControl != null) {\n      this.ngControl.valueAccessor = this;\n    }\n  }\n\n  public onChange(value) {\n    this.passthrough = value;\n    this.changed.forEach(f => f(value));\n    this.stateChanges.next();\n  }\n\n  public ngOnDestroy() {\n    this.stateChanges.complete();\n  }\n\n  public writeValue(value: string) {\n    this.passthrough = value;\n    this.stateChanges.next();\n  }\n\n  public registerOnChange(fn: (value: string) => void) {\n    this.changed.push(fn);\n  }\n\n  public registerOnTouched(fn: () => void) {}\n}\n","<fate-input customClass=\"\" [uiId]=\"uiId\" [row]=\"row\" [ngModel]=\"passthrough\" (ngModelChange)=\"onChange($event)\"></fate-input>\n<fate-ui class=\"mat-select-panel\" [uiId]=\"uiId\" [buttons]=\"buttons\" [ngClass]=\"{'visible': uiVisible}\"></fate-ui>\n","import { FateType } from './fate-type.enum';\n\nexport class FateNode {\n  constructor(public type: FateType = FateType.NONE, public value?: any) {}\n\n  public children: Array<FateNode | string> = [];\n}\n","import { Injectable } from '@angular/core';\n\nimport { FateHtmlParserService } from './fate-html-parser.service';\nimport { FateParser } from './fate-parser.interface';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FateParserService extends FateHtmlParserService implements FateParser {}\n","export enum FateType {\n  NONE = 'NONE',\n  PARAGRAPH = 'PARAGRAPH',\n  HEADER1 = 'HEADER1',\n  HEADER2 = 'HEADER2',\n  HEADER3 = 'HEADER3',\n  HEADER4 = 'HEADER4',\n  HEADER5 = 'HEADER5',\n  HEADER6 = 'HEADER6',\n  QUOTE = 'QUOTE',\n  CODE = 'CODE',\n  SIZE = 'SIZE',\n  BOLD = 'BOLD',\n  HIGHLIGHT = 'HIGHLIGHT',\n  SUBSCRIPT = 'SUBSCRIPT',\n  SUPERSCRIPT = 'SUPERSCRIPT',\n  STRIKETHROUGH = 'STRIKETHROUGH',\n  ITALIC = 'ITALIC',\n  COLOR = 'COLOR',\n  UNDERLINE = 'UNDERLINE',\n  LINK = 'LINK',\n  ALIGN_LEFT = 'ALIGN_LEFT',\n  ALIGN_CENTER = 'ALIGN_CENTER',\n  ALIGN_RIGHT = 'ALIGN_RIGHT',\n  JUSTIFY = 'JUSTIFY',\n  ORDERED_LIST = 'ORDERED_LIST',\n  UNORDERED_LIST = 'UNORDERED_LIST',\n  LISTITEM = 'LISTITEM',\n  INDENT = 'INDENT',\n  TYPEFACE = 'TYPEFACE',\n}\n","import { Component, Input, ElementRef, HostListener, OnChanges, AfterViewInit, ComponentFactoryResolver, ViewChild, ViewContainerRef, ViewRef } from '@angular/core';\n\nimport { Subscription } from 'rxjs';\n\nimport { FateControllerService } from '../fate-controller.service';\nimport { FateParserService } from '../fate-parser.service';\nimport { FateIconService } from '../fate-icon.service';\nimport { FateLegacyBrowserService } from '../fate-legacy-browser.service';\n\nexport const defaultButtons = [\n  'bold',\n  'italic',\n  'underline',\n  'strike',\n  'separator',\n  'subscript',\n  'superscript',\n  'link',\n  'separator',\n  'heading1',\n  'heading2',\n  'heading3',\n  'heading4',\n  'heading5',\n  'heading6',\n  'normal',\n  'separator',\n  'indent',\n  'outdent',\n  'ordered',\n  'unordered',\n  'separator',\n  'center',\n  'justify',\n  'left',\n  'right',\n  'separator',\n  'undo',\n  'redo',\n  'clean'\n];\n\n@Component({\n  selector: 'fate-ui',\n  templateUrl: './fate-ui.component.html',\n  styleUrls: ['./fate-ui.component.scss']\n})\nexport class FateUiComponent implements OnChanges, AfterViewInit {\n\n  @Input()\n  public uiId: string = 'default';\n\n  @Input()\n  public buttons: Array<string> = defaultButtons;\n\n  public enabled: any = {};\n  public dropdownAction: boolean | string = false;\n  public dropdownValue: string;\n  protected dropdownComponent: ViewRef;\n\n  protected inputSubscription: Subscription;\n\n  constructor(protected el: ElementRef, public controller: FateControllerService, public icon: FateIconService, protected parser: FateParserService, protected factoryResolver: ComponentFactoryResolver, protected legacyBrowser: FateLegacyBrowserService) { }\n\n  @HostListener('mousedown', ['$event'])\n  public mouseDown(event) {\n\n    if (!this.legacyBrowser.findParent(event.target, '.fate-ui-dropdown')) {\n      event.preventDefault();\n    }\n  }\n\n  @HostListener('keyup', ['$event'])\n  public keyUp(event) {\n    if (event.key === 'Enter') {\n      const name = event.target.name;\n      if (name) {\n        this.do(event, name);\n      }\n    }\n  }\n\n  @ViewChild('dropdown', {\n    read: ViewContainerRef,\n    static: true,\n  })\n  viewContainerRef: ViewContainerRef\n\n  public do(event, action) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (this.controller.getAction(action).dropdown) {\n      if (action === this.dropdownAction) {\n        this.dropdownAction = false;\n      } else {\n        let button = event.target;\n        if (!button.classList.contains('fate-ui-button')) {\n          button = this.legacyBrowser.findParent(button, '.fate-ui-button');\n        }\n        if(!button) {\n          return\n        }\n        const dropdown =  this.el.nativeElement.querySelector('.fate-ui-dropdown');\n\n        // Enable the dropdown\n\n        this.dropdownValue = this.enabled[action];\n        console.debug('action has value', button, dropdown, this.dropdownValue);\n        this.initDropdown(this.controller.getAction(action).dropdown, this.dropdownValue);\n\n        // Postion the dropdown\n        setTimeout(() => {\n          const buttonSize = button.getBoundingClientRect();\n          const dropdownSize =  dropdown.getBoundingClientRect();\n          let leftPosition = button.offsetLeft + (buttonSize.width / 2) - (dropdownSize.width / 2);\n          // make sure the dropdown is not bleeding out of the viewport\n          if (buttonSize.left + window.pageXOffset + (buttonSize.width / 2) - (dropdownSize.width / 2) < 3) {\n            leftPosition = - buttonSize.left - window.pageXOffset + button.offsetLeft + 3;\n          } else if (buttonSize.left + window.pageXOffset + (buttonSize.width / 2) + (dropdownSize.width / 2) > window.innerWidth - 3) {\n            leftPosition = window.innerWidth - buttonSize.left - window.pageXOffset + button.offsetLeft - dropdownSize.width - 3;\n          }\n          const topPosition = button.offsetTop + buttonSize.height - 3;\n          dropdown.style.left = leftPosition + 'px';\n          dropdown.style.top = topPosition + 'px';\n          // make the dropdown visible\n          this.dropdownAction = action;\n        }, 0);\n      }\n    } else {\n      this.dropdownAction = false;\n      this.controller.do(this.uiId, action);\n    }\n  }\n\n  protected getOffset(element) {\n    let top = 0;\n    let left = 0;\n    do {\n        top += element.offsetTop  || 0;\n        left += element.offsetLeft || 0;\n        element = element.offsetParent;\n    } while (element);\n\n    return {\n        top: top,\n        left: left\n    };\n  }\n\n  protected initDropdown(actionComponent, value) {\n    if (this.dropdownComponent) {\n      this.dropdownComponent.destroy();\n    }\n    const factory = this.factoryResolver.resolveComponentFactory(actionComponent);\n    const component: any = factory.create(this.viewContainerRef.parentInjector);\n    if (component.instance.valueChange) {\n      component.instance.value = value;\n      component.instance.valueChange.subscribe((newValue) => {\n        this.dropdownValue = newValue;\n        this.controller.do(this.uiId, this.dropdownAction, newValue);\n      });\n      this.dropdownComponent = this.viewContainerRef.insert(component.hostView);\n    } else {\n      throw new Error('The component used as a dropdown doesn\\'t contain a valueChange emmiter!');\n    }\n  }\n\n  public ngOnChanges(changes) {\n    if (changes['uiId']) {\n      if (this.inputSubscription) {\n        this.inputSubscription.unsubscribe();\n      }\n      this.inputSubscription = this.controller.enabled(this.uiId).subscribe((actions: any) => {\n        this.enabled = {};\n        for (const action of actions) {\n          this.enabled[action.action] = action.value || true;\n        }\n      });\n    }\n  }\n\n  public ngAfterViewInit() {\n    const handle = window.addEventListener('mousedown', (event) => {\n      if (!this.legacyBrowser.findParent((event.target as Element), '.fate-ui-dropdown')) {\n        this.dropdownAction = false;\n      }\n    });\n  }\n}\n","<div>\n  <ng-container *ngFor=\"let button of buttons\">\n    <a *ngIf=\"button !== 'separator'\" tabindex=\"0\" class=\"fate-ui-button\" [name]=\"button\" [ngClass]=\"{enabled: enabled[button], 'with-dropdown': dropdownAction === button}\" (click)=\"do($event, button)\">\n      <span *ngIf=\"icon.getIcon(button)\" [innerHtml]=\"icon.getIcon(button)\"></span>\n      <span *ngIf=\"!icon.getIcon(button)\">{{controller.getAction(button).label}}</span>\n      <span class=\"reader\">{{controller.getAction(button).name}}</span>\n    </a>\n    <div *ngIf=\"button === 'separator'\" class=\"fate-ui-separator\"></div>\n  </ng-container>\n  <div class=\"fate-ui-dropdown\" [ngClass]=\"{visible: dropdownAction}\">\n    <ng-template #dropdown></ng-template>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { MatFormFieldModule } from '@angular/material/form-field';\n\nimport { FateUiComponent } from './fate-ui/fate-ui.component';\nimport { FateInputComponent } from './fate-input/fate-input.component';\nimport { FateBootstrapComponent } from './fate-bootstrap/fate-bootstrap.component';\nimport { FateMaterialComponent } from './fate-material/fate-material.component';\nimport { FateLinkDropdownComponent } from './fate-link-dropdown/fate-link-dropdown.component';\n\nexport { FateParser } from './fate-parser.interface';\nexport { FateIcon } from './fate-icon.interface';\nexport { FateDropdown } from './fate-dropdown.interface';\nexport { FateUiComponent } from './fate-ui/fate-ui.component';\nexport { FateInputComponent } from './fate-input/fate-input.component';\nexport { FateLinkDropdownComponent } from './fate-link-dropdown/fate-link-dropdown.component';\nexport { FateIconService } from './fate-icon.service';\nexport { FateMaterialIconService } from './fate-material-icon.service';\nexport { FateFontawsomeLegacyIconService } from './fate-fontawsome-legacy-icon.service';\nexport { FateParserService } from './fate-parser.service';\nexport { FateControllerService, FateCommand } from './fate-controller.service';\nexport { FateHtmlParserService } from './fate-html-parser.service';\nexport { FateLegacyBrowserService } from './fate-legacy-browser.service';\nexport { FateNode } from './fate-node';\nexport { FateType } from './fate-type.enum';\n\n@NgModule({\n  declarations: [\n    FateInputComponent,\n    FateUiComponent,\n    FateBootstrapComponent,\n    FateLinkDropdownComponent,\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n  ],\n  exports: [\n    FateUiComponent,\n    FateInputComponent,\n    FateBootstrapComponent,\n    FateLinkDropdownComponent\n  ],\n})\nexport class FateModule { }\n\n@NgModule({\n  declarations: [\n    FateMaterialComponent,\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    MatFormFieldModule,\n    FateModule\n  ],\n  exports: [\n    FateMaterialComponent,\n  ]\n})\nexport class FateMaterialModule { }","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n"],"sourceRoot":"webpack:///"}